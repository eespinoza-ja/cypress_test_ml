# This config is equivalent to both the '.circleci/extended/orb-free.yml' and the base '.circleci/config.yml'
version: 2.1

orbs:
  node: circleci/node@4.7.0

jobs:
  cypress_tests:
      docker:
        - image: 'node:latest'
      steps:
        - checkout
        - run:
            command: apt-get install libgtk2.0-0 libgtk-3-0 libgbm-dev libnotify-dev libgconf-2-4 libnss3 libxss1 libasound2 libxtst6 xauth xvfb
        - run:
            command: npm install cypress --save-dev
        - run:
            command: npx cypress run

workflows:
  build-test:
    jobs:
      - cypress_tests